<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Redirecting…</title>

    <!-- ==========================================================
       1️⃣  SAME CSP THAT index.html USES
       ========================================================== -->
    <!-- ====================  Content‑Security‑Policy  ==================== -->
    <meta http-equiv="Content-Security-Policy" content="
            default-src 'self' http://127.0.0.1:* https:;
            script-src  'self' 'unsafe-inline' http://127.0.0.1:* https:;
            style-src   'self' 'unsafe-inline' https:;
            img-src     'self' data: http: https:;
            connect-src 'self' http: https:;
            font-src    'self' data: https:;
          ">

    <!-- ==========================================================
       2️⃣  STORE THE ORIGINAL DEEP LINK
       ========================================================== -->
    <script>
        // Preserve everything after the domain (path + query + hash)
        const originalPath = window.location.pathname +
            window.location.search +
            window.location.hash;

        // Save it in sessionStorage – bootstrap.js will read it later.
        sessionStorage.setItem('redirect_path', originalPath);

        // ------------------------------------------------------------
        // 3️⃣  CHANGE the address bar to the root ("/") WITHOUT adding
        //     a new entry to the browser history.
        // ------------------------------------------------------------
        // Using replaceState means the back button will go to the page
        // the user was on before typing the deep link.
        window.history.replaceState(null, '', '/');

        // ------------------------------------------------------------
        // 4️⃣  Force the browser to actually request "/" now.
        // ------------------------------------------------------------
        // location.replace triggers a full navigation (GET /) which
        // returns index.html with a 200 status.
        window.location.replace('/');
    </script>

    <!-- ==========================================================
       5️⃣  Fallback for browsers with JS disabled (very rare)
       ========================================================== -->
    <noscript>
        <meta http-equiv="refresh" content="0;url=/" />
    </noscript>

    <!-- ==========================================================
       6️⃣  Minimal styling – just so the user sees something
       ========================================================== -->
    <style>
        body {
            font-family: system-ui, sans-serif;
            margin: 2rem;
            color: #555;
        }
    </style>
</head>

<body>
    <p>Redirecting…</p>
</body>

</html>